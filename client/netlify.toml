[build]
  command = "npm run build"
  publish = "dist"
[[headers]]
  for = "*"
  [headers.values]
    # media-src directive is for nosleep.js
    Content-Security-Policy = "default-src 'self';connect-src 'self' https://cognito-idp.us-east-1.amazonaws.com https://o4504114345017344.ingest.sentry.io/api/4504114369527808/envelope/;frame-ancestors 'none';media-src data:; report-uri https://o4504114345017344.ingest.sentry.io/api/4504114369527808/security/?sentry_key=7fc7812ff3d6482ba2113d6fc90177fa"
    X-Content-Type-Options = "nosniff"
[[headers]]
  for = "*.(avif|css|md|png|svg|woff2)"
  [headers.values]
    Cache-Control = "immutable,max-age=31536000"
[[headers]]
  for = "index.*.js|wordCloudWorker.*.js"
  [headers.values]
    Cache-Control = "immutable,max-age=31536000"
[[redirects]]
  from = "api/*"
  status = 200
  to = "https://nkw6whtyg5.execute-api.us-east-1.amazonaws.com/prod/:splat"
[[redirects]]
  from = "*"
  status = 200
  to = "/"
